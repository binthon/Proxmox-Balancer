trigger: none

name: 'tfvars-generate'

pool:
  name: "Win"
  demands:
    - Agent.Name -equals win

steps:
- task: PowerShell@2
  displayName: "Zapisz terraform.tfvars.json"
  inputs:
    targetType: inline
    script: |
      $env:TFVARS_CONTENT | Out-File -FilePath terraform.tfvars.json -Encoding utf8

- task: PublishPipelineArtifact@1
  inputs:
    targetPath: 'terraform.tfvars.json'
    artifactName: 'tfvars'
